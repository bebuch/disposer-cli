component
	server = http_server
		root = /home/bebuch/media/projekte/disposer.AppImage/html/
		port = 8000
; 	fir = camera_vimba
; 		ip = 192.168.2.201
; 		width = 1024
; 		height = 770
	nir = camera_ximea
		cam_id = 0
		x_offset = 0
		y_offset = 3
		width = 2045
		height = 1080
		format = mono8
		exposure_time_ns = 100000
	vis = camera_ximea
		cam_id = 1
		use_camera_region = true
		x_offset = 0
		y_offset = 32
		width = 2048
		height = 1024
		format = mono8
		exposure_time_ns = 50000
; List of process chains
chain
	save_live
		vis//capture
			->
				image = >vis_img
		nir//capture
			->
				image = >nir_img
; 		fir//capture
; 			->
; 				image = >fir_img
; 		subbitmap
; 			parameter
; 				x = 0
; 				y = 0
; 				width = 1024
; 				height = 768
; 			<-
; 				image = <fir_img
; 			->
; 				image = >fir_img
; 		normalize_bitmap
; 			parameter
; 				min = 0
; 				max = 255
; 				format = uint8
; 			<-
; 				image = &fir_img
; 			->
; 				image = >show_fir
		raster
			parameter
				x_count = 4
				y_count = 4
				x_offset = 0
				y_offset = 0
			<-
				image = &vis_img
			->
				image = >show_vis_img
		raster
			parameter
				x_count = 5
				y_count = 5
				x_offset = 0
				y_offset = 0
			<-
				image = &nir_img
			->
				image = >show_nir_img
		channel_unbundle
			parameter
				x_count = 4
				y_count = 4
			<-
				image = <vis_img
			->
				images = >vis_imgs
		vector_disjoin
			parameter
				count = 16
			<-
				list = <vis_imgs
			->
				data = >vis_img
		encode_bbf
			<-
				image = <vis_img
			->
				data = >vis_data
		vector_join
			parameter
				count = 16
			<-
				data = <vis_data
			->
				list = >vis_datas
		save
			parameter
				name = /home/bebuch/media/data/capture/vis_${id}_${subid}_${i}.bbf
			<-
				content = <vis_datas
		channel_unbundle
			parameter
				x_count = 5
				y_count = 5
			<-
				image = <nir_img
			->
				images = >nir_imgs
		vector_disjoin
			parameter
				count = 25
			<-
				list = <nir_imgs
			->
				data = >nir_img
		encode_bbf
			<-
				image = <nir_img
			->
				data = >nir_data
		vector_join
			parameter
				count = 25
			<-
				data = <nir_data
			->
				list = >nir_datas
		save
			parameter
				name = /home/bebuch/media/data/capture/nir_${id}_${subid}_${i}.bbf
			<-
				content = <nir_datas
; 		normalize_bitmap
; 			parameter
; 				min = 0
; 				max = 65535
; 			<-
; 				image = <fir_img
; 			->
; 				image = >fir_img
; 		encode_bbf
; 			<-
; 				image = <fir_img
; 			->
; 				data = >fir_data
; 		save
; 			parameter
; 				name = /home/bebuch/media/data/capture/fir_${id}_${subid}.bbf
; 			<-
; 				content = <fir_data
		bitmap_join
			parameter
				default_value = 0
				orientation = vertical
			<-
				image1 = <show_vis_img
				image2 = <show_nir_img
			->
				image = >show_img
; 		bitmap_join
; 			parameter
; 				default_value = 0
; 			<-
; 				image1 = <show_img
; 				image2 = <show_fir
; 			->
; 				image = >show_img
		encode_jpg
			<-
				image = <show_img
			->
				data = >show_data
		server//websocket
			parameter
				service_name = scheduler
			<-
				data = <show_data
	show_live
		vis//capture
			->
				image = >vis_img
		nir//capture
			->
				image = >nir_img
; 		fir//capture
; 			->
; 				image = >fir_img
; 		subbitmap
; 			parameter
; 				x = 0
; 				y = 0
; 				width = 1024
; 				height = 768
; 			<-
; 				image = <fir_img
; 			->
; 				image = >fir_img
; 		normalize_bitmap
; 			parameter
; 				min = 0
; 				max = 255
; 				format = uint8
; 			<-
; 				image = <fir_img
; 			->
; 				image = >show_fir
		raster
			parameter
				x_count = 4
				y_count = 4
				x_offset = 0
				y_offset = 0
			<-
				image = <vis_img
			->
				image = >show_vis_img
		raster
			parameter
				x_count = 5
				y_count = 5
				x_offset = 0
				y_offset = 0
			<-
				image = <nir_img
			->
				image = >show_nir_img
		bitmap_join
			parameter
				default_value = 0
				orientation = vertical
			<-
				image1 = <show_vis_img
				image2 = <show_nir_img
			->
				image = >show_img
; 		bitmap_join
; 			parameter
; 				default_value = 0
; 			<-
; 				image1 = <show_img
; 				image2 = <show_fir
; 			->
; 				image = >show_img
		encode_jpg
			<-
				image = <show_img
			->
				data = >show_data
		server//websocket
			parameter
				service_name = scheduler
			<-
				data = <show_data
	demo
		load
			parameter
				id_add=1
				id_digits=3
				subid_digits=1
				name = /home/bebuch/media/data/3d-Stahl/20170713/Ximea/VIS/VIS_measure_05_100ms_10fps/${subid}${id}.png
			->
				content = >data1
		decode_png
			parameter
				format = g8
			<-
				data = <data1
			->
				image = >img1
		vignetting_correction
			parameter
				factor_image_filename = /home/bebuch/media/data/ximea/white/00_VIS_0100ms.bbf
			<-
				image = <img1
			->
				image = >img1
; 		subbitmap
; 			parameter
; 				x = 0
; 				y = 32
; 				width = 2048
; 				height = 1024
; 			<-
; 				image = <img1
; 			->
; 				image = >img1
; 		channel_unbundle
; 			parameter
; 				x_count = 4
; 				y_count = 4
; 			<-
; 				image = <img1
; 			->
; 				images = >imgs1
; 		multi_subbitmap
; 			parameter
; 				x_offsets = 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
; 				y_offsets = 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
; 				width = 512
; 				height = 256
; 			<-
; 				images = <imgs1
; 			->
; 				images = >imgs1
; 		vector_disjoin
; 			parameter
; 				count = 16
; 			<-
; 				list = <imgs1
; 			->
; 				data = >img1
		encode_png
			<-
				image = <img1
			->
				data = >data1
; 		vector_join
; 			parameter
; 				count = 16
; 			<-
; 				data = <data1
; 			->
; 				list = >data1
		save
			parameter
				id_add=1
				id_digits=3
				subid_digits=1
				i_digits=2
; 				name = /home/bebuch/media/tmp/demo_${subid}${id}_${i}.png
				name = /home/bebuch/media/tmp/demo_${subid}${id}.png
			<-
				content = <data1

; 	make_vin_cor
; 		load
; 			parameter
; 				id_digits=1
; 				subid_digits=1
; 				name = /home/bebuch/media/data/ximea/white/${subid}${id}_VIS_0100ms.png
; 			->
; 				content = >data1
; 		decode_png
; 			parameter
; 				format = g8
; 			<-
; 				data = <data1
; 			->
; 				image = >img1
; 		vignetting_correction_creator
; 			parameter
; 				reference = 50
; 			<-
; 				image = <img1
; 			->
; 				image = >img1
; 		encode_bbf
; 			<-
; 				image = <img1
; 			->
; 				data = >data1
; 		save
; 			parameter
; 				id_digits=1
; 				subid_digits=1
; 				name = /home/bebuch/media/data/ximea/white/${subid}${id}_VIS_0100ms.bbf
; 			<-
; 				content = <data1
;

; 	save_image
; 		camera_ximea
; 			parameter
; 				cam_id = 0
; 				x_offset = 0
; 				y_offset = 3
; 				width = 2045
; 				height = 1080
; 				format = mono8
; 				exposure_time_ns = 80000
; 			->
; 				image = >img
; 		encode_png
; 			<-
; 				image = <img
; 			->
; 				data = >img
; 		save
; 			parameter
; 				name = /home/bebuch/media/data/ximea/full/${id}_${subid}.png
; 			<-
; 				content = <img
