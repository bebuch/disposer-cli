; component
; 	server = http_server
; 		root = /home/bebuch/media/projekte/disposer_module/test/html/
; 		port = 8000
; 	nif = camera_ximea
; 		cam_id = 0
; 		x_offset = 0
; 		y_offset = 3
; 		width = 2045
; 		height = 1080
; 		format = mono8
; 		exposure_time_ns = 100000
; 	vis = camera_ximea
; 		cam_id = 0
; 		use_camera_region = true
; 		x_offset = 0
; 		y_offset = 32
; 		width = 2048
; 		height = 1024
; 		format = mono8
; 		exposure_time_ns = 50000
; List of process chains
chain
	live_image
		load
			parameter
				id_modulo = 100
				name = /home/bebuch/media/data/ximea/full/${id}_${subid}.png
			->
				content = >data1
		decode_png
			parameter
				format = g8
			<-
				data = <data1
			->
				image = >img1
; 		camera_gige_vision
; 			parameter
; 				format = mono8
; 			->
; 				image = >img1
; 		nif//capture
; 			->
; 				image = >img1
; 		camera_ximea
; 			parameter
; 				cam_id = 0
; 				use_camera_region = true
; 				x_offset = 0
; 				y_offset = 32
; 				width = 2048
; 				height = 1024
; 				format = mono8
; 				exposure_time_ns = 50000
; 			->
; 				image = >img1
; 		raster
; 			parameter
; 				x_count = 5
; 				y_count = 5
; 				x_offset = 0
; 				y_offset = 0
; 			<-
; 				image = <img1
; 			->
; 				image = >img1
; 		encode_png
; 			<-
; 				image = &img1
; 			->
; 				data = >data1
; 		save
; 			parameter
; 				name = /home/bebuch/media/data/infrared/${id}_${subid}.png
; 			<-
; 				content = <data1
		channel_unbundle
			parameter
				x_count = 5
				y_count = 5
			<-
				image = <img1
			->
				images = >imgs1
		bitmap_vector_join
			parameter
				images_per_line = 5
				default_value = 0
			<-
				images = <imgs1
			->
				image = >img1
; 		raster
; 			parameter
; 				x_count = 2
; 				y_count = 2
; 				x_offset = 0
; 				y_offset = 0
; 			<-
; 				image = <img1
; 			->
; 				image = >img1
		encode_jpg
			<-
				image = <img1
			->
				data = >data1
		server//websocket
			parameter
				service_name = scheduler
			<-
				data = <data1
	snapshot
		load
			parameter
				id_modulo = 100
				name = /home/bebuch/media/data/ximea/full/${id}_${subid}.png
			->
				content = >data1
		decode_png
			parameter
				format = g8
			<-
				data = <data1
			->
				image = >img1
; 		nif//capture
; 			->
; 				image = >img1
		channel_unbundle
			parameter
				x_count = 5
				y_count = 5
			<-
				image = <img1
			->
				images = >imgs1
		vector_disjoin
			parameter
				count = 25
			<-
				list = <imgs1
			->
				data = >img1
		encode_png
			<-
				image = <img1
			->
				data = >data1
		vector_join
			parameter
				count = 25
			<-
				data = <data1
			->
				list = >data1
		save
			parameter
				name = /home/bebuch/media/data/ximea/${id}_${subid}_${i}.png
			<-
				content = <data1

	demo
		load
			parameter
				id_add=1
				id_digits=3
				subid_digits=1
				name = /home/bebuch/media/data/3d-Stahl/20170713/Ximea/VIS/VIS_measure_05_100ms_10fps/${subid}${id}.png
			->
				content = >data1
		decode_png
			parameter
				format = g8
			<-
				data = <data1
			->
				image = >img1
		vignetting_correction
			parameter
				factor_image_filename = /home/bebuch/media/data/ximea/white/00_VIS_0100ms.bbf
			<-
				image = <img1
			->
				image = >img1
; 		subbitmap
; 			parameter
; 				x = 0
; 				y = 32
; 				width = 2048
; 				height = 1024
; 			<-
; 				image = <img1
; 			->
; 				image = >img1
; 		channel_unbundle
; 			parameter
; 				x_count = 4
; 				y_count = 4
; 			<-
; 				image = <img1
; 			->
; 				images = >imgs1
; 		multi_subbitmap
; 			parameter
; 				x_offsets = 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
; 				y_offsets = 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
; 				width = 512
; 				height = 256
; 			<-
; 				images = <imgs1
; 			->
; 				images = >imgs1
; 		vector_disjoin
; 			parameter
; 				count = 16
; 			<-
; 				list = <imgs1
; 			->
; 				data = >img1
		encode_png
			<-
				image = <img1
			->
				data = >data1
; 		vector_join
; 			parameter
; 				count = 16
; 			<-
; 				data = <data1
; 			->
; 				list = >data1
		save
			parameter
				id_add=1
				id_digits=3
				subid_digits=1
				i_digits=2
; 				name = /home/bebuch/media/tmp/demo_${subid}${id}_${i}.png
				name = /home/bebuch/media/tmp/demo_${subid}${id}.png
			<-
				content = <data1

	make_vin_cor
		load
			parameter
				id_digits=1
				subid_digits=1
				name = /home/bebuch/media/data/ximea/white/${subid}${id}_VIS_0100ms.png
			->
				content = >data1
		decode_png
			parameter
				format = g8
			<-
				data = <data1
			->
				image = >img1
		vignetting_correction_creator
			parameter
				reference = 50
			<-
				image = <img1
			->
				image = >img1
		encode_bbf
			<-
				image = <img1
			->
				data = >data1
		save
			parameter
				id_digits=1
				subid_digits=1
				name = /home/bebuch/media/data/ximea/white/${subid}${id}_VIS_0100ms.bbf
			<-
				content = <data1


; 	save_image
; 		camera_ximea
; 			parameter
; 				cam_id = 0
; 				x_offset = 0
; 				y_offset = 3
; 				width = 2045
; 				height = 1080
; 				format = mono8
; 				exposure_time_ns = 80000
; 			->
; 				image = >img
; 		encode_png
; 			<-
; 				image = <img
; 			->
; 				data = >img
; 		save
; 			parameter
; 				name = /home/bebuch/media/data/ximea/full/${id}_${subid}.png
; 			<-
; 				content = <img
